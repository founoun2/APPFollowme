
import React, { createContext, useContext, useState, ReactNode } from 'react';

type Language = 'EN' | 'FR' | 'AR';

interface I18nContextType {
  lang: Language;
  setLang: (lang: Language) => void;
  t: (key: string) => string;
  dir: 'ltr' | 'rtl';
}

const translations: Record<Language, Record<string, string>> = {
  EN: {
    // Nav
    'nav.home': 'Home',
    'nav.earn': 'Earn',
    'nav.create': 'Create',
    'nav.wallet': 'Wallet',
    'nav.profile': 'Profile',
    'nav.balance': 'Your Coins',
    'nav.add_credits': 'Add Coins',
    'nav.language': 'Language',

    // Dashboard
    'dash.overview': 'Overview',
    'dash.welcome': "Welcome back! Here's your growth activity.",
    'dash.active_campaigns': 'Active Campaigns',
    'dash.total_interactions': 'Total Interactions',
    'dash.earn_card_title': 'Earn Coins',
    'dash.earn_card_desc': 'Start completing tasks',
    'dash.chart_title': 'Engagement Analytics',
    'dash.chart_subtitle': 'Weekly interaction performance',
    'dash.recent_activity': 'Recent Activity',
    'dash.view_all': 'View All',

    // Earn
    'earn.title': 'Earn Coins',
    'earn.subtitle': 'Engage with others to build your balance.',
    'earn.streak': 'Daily Streak',
    'earn.days': 'Days',
    'earn.all_caught_up': 'All caught up!',
    'earn.no_tasks': 'No tasks available right now.',
    'earn.do_task': 'Do Task',
    'earn.skip': 'Skip',
    'earn.processing': '...',

    // Campaigns
    'camp.title': 'Campaigns',
    'camp.subtitle': 'Manage your promotions and reach.',
    'camp.new': 'New Campaign',
    'camp.details': 'Campaign Details',
    'camp.link_label': 'Link to Content',
    'camp.desc_label': 'Description / Caption',
    'camp.desc_place': 'Describe your content...',
    'camp.ai_optimize': 'AI Optimize',
    'camp.platform': 'Platform',
    'camp.goal': 'Goal',
    'camp.quantity': 'Quantity',
    'camp.reward_label': 'Coins per Action',
    'camp.reward_desc': 'Higher coins attract more users faster.',
    'camp.targeting': 'Advanced Targeting',
    'camp.geo': 'Geo-Location',
    'camp.geo_desc': 'Target specific countries',
    'camp.preview': 'Preview',
    'camp.summary': 'Order Summary',
    'camp.total_cost': 'Total Cost',
    'camp.insufficient': 'Insufficient coins.',
    'camp.cancel': 'Cancel',
    'camp.launch': 'Launch',
    'camp.no_active': 'No Active Campaigns',
    'camp.create_first': 'Create First Campaign',
    'camp.progress': 'Progress',
    'camp.edit': 'Edit Campaign',
    'camp.pause': 'Pause Campaign',
    'camp.resume': 'Resume Campaign',
    'camp.delete': 'Delete Campaign',
    'camp.delete_confirm': 'Are you sure? Unused coins will be refunded to your wallet.',
    'camp.refunded': 'Coins Refunded',
    'camp.save_changes': 'Save Changes',
    'camp.confirm_delete': 'Yes, Delete',

    // Wallet
    'wallet.title': 'Wallet',
    'wallet.balance': 'Current Balance',
    'wallet.credits': 'coins',
    'wallet.billing': 'Billing Region',
    'wallet.buy_title': 'Buy Coins',
    'wallet.best_value': 'Best Value',
    'wallet.buy_now': 'Buy Now',
    'wallet.history': 'Transaction History',
    'wallet.pay_modal': 'Complete Purchase',
    'wallet.pay_method': 'Select Payment Method',
    'wallet.pay_secure': 'SSL Secure Payment',
    'wallet.pay_btn': 'Pay',

    // Profile
    'prof.invite': 'Invite Friends & Earn',
    'prof.invite_desc': 'Get 50 coins for every friend who joins.',
    'prof.copy_link': 'Copy Invite Link',
    'prof.linked': 'Linked Accounts',
    'prof.connect': 'Connect',
    'prof.connected': 'Connected',
    'prof.account': 'Account',
    'prof.notif': 'Notifications',
    'prof.privacy': 'Privacy & Security',
    'prof.lang': 'Language & Region',
    'prof.support': 'Support',
    'prof.help': 'Help Center',
    'prof.legal': 'Terms & Privacy',
    'prof.sign_out': 'Sign Out',
    'prof.save': 'Save Changes',

    // Onboarding
    'onb.where': 'Where are you based?',
    'onb.where_desc': 'We use this to customize your tasks and currency.',
    'onb.lang': 'Choose your language',
    'onb.lang_desc': 'Select your preferred interface language.',
    'onb.next': 'Next Step',
    'onb.start': 'Start Earning',
  },
  FR: {
    'nav.home': 'Accueil',
    'nav.earn': 'Gagner',
    'nav.create': 'Créer',
    'nav.wallet': 'Portefeuille',
    'nav.profile': 'Profil',
    'nav.balance': 'Vos Pièces',
    'nav.add_credits': 'Ajouter Pièces',
    'nav.language': 'Langue',
    
    'dash.overview': 'Aperçu',
    'dash.welcome': "Bon retour! Voici votre activité.",
    'dash.active_campaigns': 'Campagnes Actives',
    'dash.total_interactions': 'Total Interactions',
    'dash.earn_card_title': 'Gagner',
    'dash.earn_card_desc': 'Commencer les tâches',
    'dash.chart_title': 'Analytique',
    'dash.chart_subtitle': 'Performance hebdomadaire',
    'dash.recent_activity': 'Activité Récente',
    'dash.view_all': 'Voir tout',

    'earn.title': 'Gagner des Pièces',
    'earn.subtitle': 'Engagez-vous pour augmenter votre solde.',
    'earn.streak': 'Série Quotidienne',
    'earn.days': 'Jours',
    'earn.all_caught_up': 'Tout est fait!',
    'earn.no_tasks': 'Aucune tâche disponible.',
    'earn.do_task': 'Faire',
    'earn.skip': 'Passer',
    'earn.processing': '...',

    'camp.title': 'Campagnes',
    'camp.subtitle': 'Gérez vos promotions.',
    'camp.new': 'Nouvelle Campagne',
    'camp.details': 'Détails',
    'camp.link_label': 'Lien vers contenu',
    'camp.desc_label': 'Description / Légende',
    'camp.desc_place': 'Décrivez votre contenu...',
    'camp.ai_optimize': 'Optimiser IA',
    'camp.platform': 'Plateforme',
    'camp.goal': 'But',
    'camp.quantity': 'Quantité',
    'camp.reward_label': 'Pièces par action',
    'camp.reward_desc': 'Plus de pièces = résultats plus rapides.',
    'camp.targeting': 'Ciblage Avancé',
    'camp.geo': 'Géo-localisation',
    'camp.geo_desc': 'Cibler des pays spécifiques',
    'camp.preview': 'Aperçu',
    'camp.summary': 'Résumé de la commande',
    'camp.total_cost': 'Coût Total',
    'camp.insufficient': 'Pièces insuffisantes.',
    'camp.cancel': 'Annuler',
    'camp.launch': 'Lancer',
    'camp.no_active': 'Aucune campagne active',
    'camp.create_first': 'Créer une première campagne',
    'camp.progress': 'Progression',
    'camp.edit': 'Modifier',
    'camp.pause': 'Mettre en pause',
    'camp.resume': 'Reprendre',
    'camp.delete': 'Supprimer',
    'camp.delete_confirm': 'Êtes-vous sûr ? Les pièces inutilisées seront remboursées.',
    'camp.refunded': 'Pièces Remboursées',
    'camp.save_changes': 'Enregistrer',
    'camp.confirm_delete': 'Oui, Supprimer',

    'wallet.title': 'Portefeuille',
    'wallet.balance': 'Solde Actuel',
    'wallet.credits': 'pièces',
    'wallet.billing': 'Région de facturation',
    'wallet.buy_title': 'Acheter Pièces',
    'wallet.best_value': 'Meilleur Choix',
    'wallet.buy_now': 'Acheter',
    'wallet.history': 'Historique',
    'wallet.pay_modal': 'Compléter l\'achat',
    'wallet.pay_method': 'Méthode de paiement',
    'wallet.pay_secure': 'Paiement Sécurisé SSL',
    'wallet.pay_btn': 'Payer',

    'prof.invite': 'Inviter & Gagner',
    'prof.invite_desc': 'Recevez 50 pièces par ami invité.',
    'prof.copy_link': 'Copier le lien',
    'prof.linked': 'Comptes Liés',
    'prof.connect': 'Lier',
    'prof.connected': 'Connecté',
    'prof.account': 'Compte',
    'prof.notif': 'Notifications',
    'prof.privacy': 'Confidentialité',
    'prof.lang': 'Langue & Région',
    'prof.support': 'Support',
    'prof.help': 'Centre d\'aide',
    'prof.legal': 'Termes & Privé',
    'prof.sign_out': 'Déconnexion',
    'prof.save': 'Enregistrer',

    'onb.where': 'Où êtes-vous basé?',
    'onb.where_desc': 'Pour personnaliser les tâches et la devise.',
    'onb.lang': 'Choisissez votre langue',
    'onb.lang_desc': 'Sélectionnez la langue de l\'interface.',
    'onb.next': 'Suivant',
    'onb.start': 'Commencer',
  },
  AR: {
    'nav.home': 'الرئيسية',
    'nav.earn': 'كسب',
    'nav.create': 'إنشاء',
    'nav.wallet': 'المحفظة',
    'nav.profile': 'حسابي',
    'nav.balance': 'رصيدك',
    'nav.add_credits': 'شراء عملات',
    'nav.language': 'اللغة',

    'dash.overview': 'نظرة عامة',
    'dash.welcome': "مرحباً بك! إليك نشاط نموك.",
    'dash.active_campaigns': 'حملات نشطة',
    'dash.total_interactions': 'إجمالي التفاعلات',
    'dash.earn_card_title': 'كسب',
    'dash.earn_card_desc': 'ابدأ بإتمام المهام',
    'dash.chart_title': 'تحليلات التفاعل',
    'dash.chart_subtitle': 'أداء التفاعل الأسبوعي',
    'dash.recent_activity': 'النشاط الأخير',
    'dash.view_all': 'عرض الكل',

    'earn.title': 'كسب العملات',
    'earn.subtitle': 'تفاعل مع الآخرين لزيادة رصيدك.',
    'earn.streak': 'سلسلة يومية',
    'earn.days': 'أيام',
    'earn.all_caught_up': 'انتهت المهام!',
    'earn.no_tasks': 'لا توجد مهام متاحة الآن.',
    'earn.do_task': 'تنفيد',
    'earn.skip': 'تخطي',
    'earn.processing': '...',

    'camp.title': 'الحملات',
    'camp.subtitle': 'إدارة عروضك الترويجية.',
    'camp.new': 'حملة جديدة',
    'camp.details': 'تفاصيل الحملة',
    'camp.link_label': 'رابط المحتوى',
    'camp.desc_label': 'الوصف / التعليق',
    'camp.desc_place': 'صف المحتوى الخاص بك...',
    'camp.ai_optimize': 'تحسين بالذكاء الاصطناعي',
    'camp.platform': 'المنصة',
    'camp.goal': 'الهدف',
    'camp.quantity': 'الكمية',
    'camp.reward_label': 'عملات لكل إجراء',
    'camp.reward_desc': 'عملات أعلى تعني نتائج أسرع.',
    'camp.targeting': 'استهداف متقدم',
    'camp.geo': 'الموقع الجغرافي',
    'camp.geo_desc': 'استهداف دول محددة',
    'camp.preview': 'معاينة',
    'camp.summary': 'ملخص الطلب',
    'camp.total_cost': 'التكلفة الإجمالية',
    'camp.insufficient': 'رصيد غير كاف.',
    'camp.cancel': 'إلغاء',
    'camp.launch': 'إطلاق',
    'camp.no_active': 'لا توجد حملات نشطة',
    'camp.create_first': 'أنشئ حملتك الأولى',
    'camp.progress': 'التقدم',
    'camp.edit': 'تعديل الحملة',
    'camp.pause': 'إيقاف مؤقت',
    'camp.resume': 'استئناف',
    'camp.delete': 'حذف الحملة',
    'camp.delete_confirm': 'هل أنت متأكد؟ سيتم استرداد العملات غير المستخدمة.',
    'camp.refunded': 'تم استرداد العملات',
    'camp.save_changes': 'حفظ التغييرات',
    'camp.confirm_delete': 'نعم، حذف',

    'wallet.title': 'المحفظة',
    'wallet.balance': 'الرصيد الحالي',
    'wallet.credits': 'عملة',
    'wallet.billing': 'منطقة الفوترة',
    'wallet.buy_title': 'شراء عملات',
    'wallet.best_value': 'أفضل قيمة',
    'wallet.buy_now': 'شراء الآن',
    'wallet.history': 'سجل المعاملات',
    'wallet.pay_modal': 'إتمام الشراء',
    'wallet.pay_method': 'طريقة الدفع',
    'wallet.pay_secure': 'دفع آمن SSL',
    'wallet.pay_btn': 'دفع',

    'prof.invite': 'ادعُ الأصدقاء واربح',
    'prof.invite_desc': 'احصل على 50 عملة لكل صديق ينضم.',
    'prof.copy_link': 'نسخ الرابط',
    'prof.linked': 'الحسابات المرتبطة',
    'prof.connect': 'ربط',
    'prof.connected': 'متصل',
    'prof.account': 'الحساب',
    'prof.notif': 'الإشعارات',
    'prof.privacy': 'الخصوصية والأمان',
    'prof.lang': 'اللغة والمنطقة',
    'prof.support': 'الدعم',
    'prof.help': 'مركز المساعدة',
    'prof.legal': 'الشروط والخصوصية',
    'prof.sign_out': 'تسجيل خروج',
    'prof.save': 'حفظ التغييرات',

    'onb.where': 'أين تقيم؟',
    'onb.where_desc': 'نستخدم هذا لتخصيص المهام والعملة.',
    'onb.lang': 'اختر لغتك',
    'onb.lang_desc': 'حدد لغة الواجهة المفضلة.',
    'onb.next': 'التالي',
    'onb.start': 'ابدأ الكسب',
  }
};

export const LanguageContext = createContext<I18nContextType>({
  lang: 'EN',
  setLang: () => {},
  t: (key) => key,
  dir: 'ltr'
});

export const useLanguage = () => useContext(LanguageContext);

export const I18nProvider: React.FC<{children: ReactNode, initialLang?: Language}> = ({ children, initialLang = 'EN' }) => {
  const [lang, setLang] = useState<Language>(initialLang);
  
  const t = (key: string): string => {
    return translations[lang][key] || key;
  };

  const dir = lang === 'AR' ? 'rtl' : 'ltr';

  return React.createElement(
    LanguageContext.Provider, 
    { value: { lang, setLang, t, dir } }, 
    children
  );
};
